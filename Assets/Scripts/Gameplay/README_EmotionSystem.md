# Система эмоций (баффов)

## Обзор
Система эмоций представляет собой механику, позволяющую игроку выбирать и улучшать различные эмоциональные состояния, каждое из которых дает уникальные бонусы в бою. Всего доступно 6 различных эмоций, которые можно активировать через специальный объект взаимодействия.

## Основные особенности
- 6 типов эмоций с уникальными эффектами
- Улучшение эмоций за игровую валюту (фрагменты)
- Увеличение максимального количества одновременно активных эмоций
- Сброс активных эмоций при смерти или переходе между мирами
- Интеграция с боевой системой для применения эффектов

## Эмоции и их эффекты

### Решимость
- Эффект: +10% к урону, если HP меньше 50%, +10% к скорости в бою с элитами
- Уровень 2: +15% к урону, если HP меньше 50%, +15% к скорости в бою с элитами
- Уровень 3: +20% к урону, если HP меньше 50%, +20% к скорости в бою с элитами

### Сострадание
- Эффект: +5% HP после победы над врагом
- Уровень 2: +10% HP после победы над врагом
- Уровень 3: +15% HP после победы над врагом

### Страх
- Эффект: +20% к шансу избежать удара, -10% урона
- Уровень 2: +25% к шансу избежать удара, -8% урона
- Уровень 3: +30% к шансу избежать удара, -5% урона

### Принятие
- Эффект: 1 раз за комнату при смерти восстанавливает 20% HP
- Уровень 2: 1 раз за комнату при смерти восстанавливает 35% HP
- Уровень 3: 1 раз за комнату при смерти восстанавливает 50% HP

### Гнев
- Эффект: +15% урона, -10% HP
- Уровень 2: +20% урона, -8% HP
- Уровень 3: +25% урона, -5% HP

### Отрицание
- Эффект: 1 удар в комнате игнорируется
- Уровень 2: 2 удара в комнате игнорируются
- Уровень 3: 3 удара в комнате игнорируются

## Компоненты системы

### EmotionSystem
Основной класс для управления эмоциями. Отвечает за:
- Хранение данных о всех эмоциях
- Активацию/деактивацию эмоций
- Улучшение эмоций
- Увеличение максимального количества одновременно активных эмоций
- Сброс эмоций при смерти или смене мира

### EmotionUI
Пользовательский интерфейс для взаимодействия с системой эмоций:
- Отображение доступных эмоций
- Выбор активных эмоций
- Улучшение эмоций за фрагменты
- Увеличение максимального количества одновременно активных эмоций

### EmotionInteractable
Объект в игровом мире, с которым игрок может взаимодействовать для открытия меню эмоций.

### PlayerEmotionHandler
Компонент, отвечающий за применение эффектов эмоций к игроку:
- Модификация урона, наносимого игроком
- Модификация получаемого урона
- Управление шансом уклонения
- Восстановление здоровья
- Воскрешение при смерти

## Использование системы

### Добавление объекта взаимодействия
1. Создайте новый объект в сцене
2. Добавьте компонент EmotionInteractable
3. Настройте ссылки на визуальную модель

### Интеграция с контроллерами игрока
Системы эмоций автоматически интегрирована с PlayerController и ConsciousnessController. При создании новых контроллеров игрока необходимо:
1. Добавить ссылку на PlayerEmotionHandler
2. Вызывать соответствующие методы для применения эффектов эмоций

### Улучшение системы
Для улучшения эмоций игрок использует валюту (фрагменты). Стоимость улучшений увеличивается с каждым уровнем.

### Ограничения
- Изначально игрок может активировать только одну эмоцию одновременно
- Максимальный уровень каждой эмоции - 3
- Эмоции сбрасываются при смерти игрока или переходе между мирами

## Технические детали

### События
- `OnActiveEmotionsChanged` - вызывается при изменении списка активных эмоций
- `OnEmotionLevelChanged` - вызывается при изменении уровня эмоции

### Интеграция с другими системами
- Интеграция с GameManager для сброса эмоций при смерти и переходе между мирами
- Интеграция с CurrencyManager для покупки улучшений

### Расширение системы
Для добавления новых эмоций необходимо:
1. Добавить новый тип в enum EmotionType
2. Инициализировать новую эмоцию в методе InitializeEmotions
3. Добавить обработку эффектов в PlayerEmotionHandler

## Рекомендации по балансировке
- Стоимость улучшений эмоций: начальная стоимость 25 фрагментов, с множителем 1.5
- Стоимость увеличения максимума активных эмоций: начальная стоимость 50 фрагментов, с множителем 1.5
- Значения эффектов эмоций могут быть скорректированы для баланса игры 